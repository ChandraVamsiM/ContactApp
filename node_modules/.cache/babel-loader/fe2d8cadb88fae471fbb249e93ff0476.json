{"ast":null,"code":"var _jsxFileName = \"E:\\\\delete\\\\contact-app\\\\src\\\\pages\\\\AddEditContact.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { useAddContactMutation, useContactQuery, useUpdateContactMutation } from \"../services/contactsApi\";\nimport \"./AddEditContact.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  name: \"\",\n  email: \"\",\n  contact: \"\"\n};\n\nconst AddEditContact = () => {\n  _s();\n\n  const [formValue, setFormValue] = useState(initialState);\n  const [editMode, setEditMode] = useState(false);\n  const [formErrors, setFormErrors] = useState({});\n  const [isSubmit, setIsSubmit] = useState(false);\n  const [addContact] = useAddContactMutation();\n  const [updateContact] = useUpdateContactMutation();\n  const {\n    name,\n    email,\n    contact\n  } = formValue;\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  const {\n    data,\n    error,\n    isLoading,\n    isFetching\n  } = useContactQuery(id);\n  useEffect(() => {\n    if (error) {\n      toast.error(\"Something went Wrong\");\n    }\n  }, [id, error]);\n  useEffect(() => {\n    if (id) {\n      setEditMode(true);\n\n      if (data) {\n        setFormValue({ ...data\n        });\n      }\n    } else {\n      setEditMode(false);\n\n      if (data) {\n        setFormValue({ ...initialState\n        });\n      }\n    }\n  }, [id, data]);\n  useEffect(() => {\n    console.log(formErrors);\n\n    if (Object.keys(formErrors).length === 0 && isSubmit) {\n      console.log(formValue);\n    }\n  }, [formErrors]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (!name && !email && !contact) {\n      toast.error(\"Please provide value into each input field\");\n    } else {\n      if (!editMode) {\n        await addContact(formValue);\n        navigate(\"/\");\n        toast.success(\"Contact Added Successfully\");\n      } else {\n        await updateContact(formValue);\n        navigate(\"/\");\n        setEditMode(false);\n        toast.success(\"Contact Updated Successfully\");\n      }\n    }\n  };\n\n  const validate = values => {\n    const errors = {};\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;\n\n    if (!values.name) {\n      errors.name = \"Username is required!\";\n    } else if (name.length > 5) {\n      errors.name = \"Name should be Less than 5!\";\n    }\n  };\n\n  const handleInputChange = e => {\n    let {\n      name,\n      value\n    } = e.target;\n    setFormValue({ ...formValue,\n      [name]: value\n    });\n    setFormErrors(validate(formValue));\n    setIsSubmit(true);\n\n    if (name.length > 5) {\n      toast.error(\"Name should be less than 5 words\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: \"100px\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      style: {\n        margin: \"auto\",\n        padding: \"15px\",\n        maxWidth: \"400px\",\n        alignContent: \"center\"\n      },\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"name\",\n        children: \"Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        name: \"name\",\n        placeholder: \"Add Name...\",\n        value: formValue.name,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"email\",\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"email\",\n        name: \"email\",\n        placeholder: \"Add Email...\",\n        value: formValue.email,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"contact\",\n        children: \"Contact\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"contact\",\n        name: \"contact\",\n        placeholder: \"Add Contact No. ...\",\n        value: formValue.contact,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: id ? \"Update\" : \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddEditContact, \"SvH90SV1Bxv9a6y67bUhLNjAKQA=\", false, function () {\n  return [useAddContactMutation, useUpdateContactMutation, useNavigate, useParams, useContactQuery];\n});\n\n_c = AddEditContact;\nexport default AddEditContact;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEditContact\");","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","toast","useAddContactMutation","useContactQuery","useUpdateContactMutation","initialState","name","email","contact","AddEditContact","formValue","setFormValue","editMode","setEditMode","formErrors","setFormErrors","isSubmit","setIsSubmit","addContact","updateContact","navigate","id","data","error","isLoading","isFetching","console","log","Object","keys","length","handleSubmit","e","preventDefault","success","validate","values","errors","regex","handleInputChange","value","target","marginTop","margin","padding","maxWidth","alignContent"],"sources":["E:/delete/contact-app/src/pages/AddEditContact.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  useAddContactMutation,\r\n  useContactQuery,\r\n  useUpdateContactMutation,\r\n} from \"../services/contactsApi\";\r\nimport \"./AddEditContact.css\";\r\n\r\nconst initialState = {\r\n  name: \"\",\r\n  email: \"\",\r\n  contact: \"\",\r\n};\r\n\r\nconst AddEditContact = () => {\r\n  const [formValue, setFormValue] = useState(initialState);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n  const [addContact] = useAddContactMutation();\r\n  const [updateContact] = useUpdateContactMutation();\r\n  const { name, email, contact } = formValue;\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n\r\n  const { data, error, isLoading, isFetching } = useContactQuery(id!);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      toast.error(\"Something went Wrong\");\r\n    }\r\n  }, [id, error]);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      setEditMode(true);\r\n      if (data) {\r\n        setFormValue({ ...data });\r\n      }\r\n    } else {\r\n      setEditMode(false);\r\n      if (data) {\r\n        setFormValue({ ...initialState });\r\n      }\r\n    }\r\n  }, [id, data]);\r\n\r\n  useEffect(() => {\r\n    console.log(formErrors);\r\n    if (Object.keys(formErrors).length === 0 && isSubmit) {\r\n      console.log(formValue);\r\n    }\r\n  }, [formErrors]);\r\n\r\n  const handleSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    if (!name && !email && !contact) {\r\n      toast.error(\"Please provide value into each input field\");\r\n    } else {\r\n      if (!editMode) {\r\n        await addContact(formValue);\r\n        navigate(\"/\");\r\n        toast.success(\"Contact Added Successfully\");\r\n      } else {\r\n        await updateContact(formValue);\r\n        navigate(\"/\");\r\n        setEditMode(false);\r\n        toast.success(\"Contact Updated Successfully\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const validate = (values: string) => {\r\n    const errors: any = {};\r\n    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/i;\r\n    if (!values.name) {\r\n      errors.name = \"Username is required!\";\r\n    } else if (name.length > 5) {\r\n      errors.name = \"Name should be Less than 5!\";\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e: any) => {\r\n    let { name, value } = e.target;\r\n    setFormValue({ ...formValue, [name]: value });\r\n    setFormErrors(validate(formValue));\r\n    setIsSubmit(true);\r\n    if (name.length > 5) {\r\n      toast.error(\"Name should be less than 5 words\");\r\n    }\r\n  };\r\n  return (\r\n    <div style={{ marginTop: \"100px\" }}>\r\n      <form\r\n        style={{\r\n          margin: \"auto\",\r\n          padding: \"15px\",\r\n          maxWidth: \"400px\",\r\n          alignContent: \"center\",\r\n        }}\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <label htmlFor=\"name\">Name</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"name\"\r\n          name=\"name\"\r\n          placeholder=\"Add Name...\"\r\n          value={formValue.name}\r\n          onChange={handleInputChange}\r\n        />\r\n        <label htmlFor=\"email\">Email</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Add Email...\"\r\n          value={formValue.email}\r\n          onChange={handleInputChange}\r\n        />\r\n        <label htmlFor=\"contact\">Contact</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"contact\"\r\n          name=\"contact\"\r\n          placeholder=\"Add Contact No. ...\"\r\n          value={formValue.contact}\r\n          onChange={handleInputChange}\r\n        />\r\n\r\n        <input type=\"submit\" value={id ? \"Update\" : \"Save\"} />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddEditContact;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}